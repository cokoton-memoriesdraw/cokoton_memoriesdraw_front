<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>내 추억 저장소</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="../myPage/my_page.css">
  </head>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  
  <body>
  <h1>내 추억 저장소</h1>
  <div id="user-nickname">(별명)
    
  </div>
  

  <div class="tabmenu out-tabmenu">
    <ul>
      <li id="tab1" class="btnCon"> 
    
        <input type="radio" checked name="tabmenu" id="tabmenu1">
        <label for="tabmenu1">나의 추억</label>
        <div class="tabCon" >
            <div class="default-message" id="test1">나의 추억을 만들고 일정 시간 후에 확인해보세요.</div>
            <button type="button" id="btn">버튼</button>
            <button type="button" id="btn1">버튼</button>
            <button type="button" id="btnttttt">
              Tooltip on bottom
            </button>
            <script>
              document.getElementById('btnttttt').setAttribute("data-bs-toggle","tooltip");
              document.getElementById('btnttttt').setAttribute("data-bs-placement","bottom");
              document.getElementById('btnttttt').setAttribute("data-bs-title","Tooltip on bottom");
            </script>
            </div>
      </li>
      <li id="tab2" class="btnCon">
        <input type="radio" name="tabmenu" id="tabmenu2">
        <label for="tabmenu2">뽑은 추억</label>
        <div class="tabCon" >
            <div class="default-message" id="test2">다른 사용자의 추억을 뽑아보세요.</div>
            <button type="button" id="btn2">버튼</button>
        </div>
      </li>
    </ul>
  </div>


  <div class="modal fade" id="timeCapsuleModalToggle" aria-hidden="true" aria-labelledby="timeCapsuleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="created-date">(20XX.XX.XX X요일)</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="capsule-photo-container"><img class="capsule-photo" src="." alt="추억 사진" /></div>
          
          <button class="arrow-button" data-bs-target="#timeCapsuleModalToggle2" data-bs-toggle="modal">
            <i class="arrow right"></i></button>
        </div>
      </div>
    </div>
  </div>

  
  <div class="modal fade" id="timeCapsuleModalToggle2" aria-hidden="true" aria-labelledby="timeCapsuleModalToggleLabel2" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="created-date">(20XX.XX.XX X요일)</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <button class="arrow-button" data-bs-target="#timeCapsuleModalToggle" data-bs-toggle="modal">
            <i class="arrow left"></i></button>
          <div class="capsule-content">추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용 추억 내용</div>
        </div>
      </div>
    </div>
  </div>


  <script>
    let i = 0;

    function createUnlockedCapsule() {  // 락 걸린 캡슐 만들기
        const tabCon = document.querySelector('.tabCon');
        const unlockedCapsuleImages = ["1-unlocked.png", "2-unlocked.png"];
        const chosenImage = unlockedCapsuleImages[i];

        const unlockedCapsuleContainerButton = document.createElement('button');
        unlockedCapsuleContainerButton.className = 'transparent-button';
        unlockedCapsuleContainerButton.setAttribute('data-bs-target', '#timeCapsuleModalToggle');
        unlockedCapsuleContainerButton.setAttribute('data-bs-toggle','modal');
        unlockedCapsuleContainerButton.style.display = 'inline-block';
        unlockedCapsuleContainerButton.style.flexDirection = 'column';
        unlockedCapsuleContainerButton.style.textAlign = 'center';
        unlockedCapsuleContainerButton.style.width = '100px';
        unlockedCapsuleContainerButton.style.marginRight = '15px';
        unlockedCapsuleContainerButton.style.marginBottom = '15px';

        

        const unlockedCapsule = document.createElement('img');
        unlockedCapsule.src = `../../capsule${chosenImage}`;
        unlockedCapsule.style.width = '100px';
        unlockedCapsule.style.marginBottom = '10px';
        
        const createdDate = document.createTextNode('20XX.XX.XX');  // 작성 날짜 받아오기
        
        unlockedCapsuleContainerButton.appendChild(unlockedCapsule);
        unlockedCapsuleContainerButton.appendChild(createdDate);
        tabCon.appendChild(unlockedCapsuleContainerButton);

        i = (i + 1) % 2;
        if (tabCon.querySelector('img')) {
            tabCon.querySelector('.default-message').remove();
        }
    }
    // 사용자가 작성 페이지에서 추억을 작성하면(버튼을 클릭하면) 안 잠긴 캡슐 생성
    document.getElementById('btn').addEventListener('click', createUnlockedCapsule);
    
    function createLockedCapsule() {  // 잠긴 캡슐 생성인데 툴팁이 안됨 ㅡㅡ
      const tabCon = document.querySelector('.tabCon');
      const LockedCapsuleImages = ["1-locked.png", "2-locked.png"];
      const chosenImage = LockedCapsuleImages[i];

      const lockedCapsuleContainerButton = document.createElement('button');
      lockedCapsuleContainerButton.className = 'transparent-button';
      lockedCapsuleContainerButton.setAttribute('data-bs-toggle','tooltip');
      lockedCapsuleContainerButton.setAttribute('data-bs-placement','bottom');
      lockedCapsuleContainerButton.setAttribute('data-bs-title','30일 후 볼 수 있어요.');

      lockedCapsuleContainerButton.style.display = 'inline-block';
      lockedCapsuleContainerButton.style.flexDirection = 'column';
      lockedCapsuleContainerButton.style.textAlign = 'center';
      lockedCapsuleContainerButton.style.width = '100px';
      lockedCapsuleContainerButton.style.marginRight = '15px';
      lockedCapsuleContainerButton.style.marginBottom = '15px';

      const lockedcapsule = document.createElement('img');
      lockedcapsule.src = `../../capsule${chosenImage}`;
      lockedcapsule.style.width = '100px';
      lockedcapsule.style.marginBottom = '10px';

      const createdDate = document.createTextNode('20XX.XX.XX');  // 작성 날짜 받아오기

      lockedCapsuleContainerButton.appendChild(lockedcapsule);
      lockedCapsuleContainerButton.appendChild(createdDate);
      tabCon.appendChild(lockedCapsuleContainerButton); // tabCon에 버튼을 추가
      console.log("잠금");

    }

    // 사용자가 작성 페이지에서 추억을 작성하면(버튼을 클릭하면) 잠긴 캡슐 생성
    document.getElementById('btn1').addEventListener('click', createLockedCapsule);

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  <script>
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
  </script>
</body>
</html>